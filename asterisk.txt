running asterisk
----------------------------------------------------------------------
in foreground
    cd ~/asterisk-1.2.10
    sudo ./asterisk -vvvc
Daemon
    sudo systemctl start asterisk
    sudo systemctl enable asterisk      # optional, start on system boot


connect to CLI:
    sudo asterisk -rvvv                 
    sip show peers


configuration
----------------------------------------------------------------------
/etc/asterisk
    sip.conf
    maxexpiry=3600                 ; Maximum allowed time of incoming registrations (seconds)


minimalist client entry in sip.conf
    [UserName]
    type=friend
    host=dynamic

Debug commands
----------------------------------------------------------------------
sip show peers
sip reload
dialplan show paloalto


help
----------------------------------------------------------------------
help core show                  all commands begining with "core show"



Asterisk Logging
-----------------
1. Specify the directory for log files in /etc/asterisk/asterisk.conf
   	astlogdir => /var/log/asterisk
   in Edgemarc this is set to /var/asterisk

2. Specify files for each type of message in /etc/asterisk/logger.conf
        [logfiles]
	debugMsgs.txt => debug
	console => notice, warning, error
   debug messages go to debugMsgs.txt and notice, warning and error
   messages go to the console.

3. CLI messages go to /var/asterisk/messages
4. uncomment "full => notice,warning,error,debug,verbose" line to get all messages
   in /var/log/asterisk/full.

   


common debug commands
------------------------------------------------------------------------
core show help <command>

sip notify                     -- Send a notify packet to a SIP peer
sip prune realtime [peer|all]  -- Prune cached Realtime users/peers
sip qualify peer               -- Send an OPTIONS packet to a peer
sip reload                     -- Reload SIP configuration
sip set debug {on|off|ip|peer} -- Enable/Disable SIP debugging
sip set history {on|off}       -- Enable/Disable SIP history
sip show {channels|subscriptions} -- List active SIP channels or subscriptions
sip show channelstats          -- List statistics for active SIP channels
sip show channel               -- Show detailed SIP channel info
sip show domains               -- List our local SIP domains
sip show domains               -- show domains as configured in sip.conf
sip show history               -- Show SIP dialog history
sip show inuse                 -- List all inuse/limits
sip show mwi                   -- Show MWI subscriptions
sip show objects               -- List all SIP object allocations
sip show peers                 -- List defined SIP peers
sip show peer                  -- Show details on specific SIP peer
sip show registry              -- List SIP registration status
sip show sched                 -- Present a report on the status of the scheduler queue
sip show settings              -- Show SIP global settings
sip show tcp                   -- List TCP Connections
sip show users                 -- List defined SIP users
sip show user                  -- Show details on specific SIP user
sip unregister                 -- Unregister (force expiration) a SIP peer from the registry
sla show stations              -- Show SLA Stations

core set verbose <number>      -- 10 is the highest verbosity
dialplan show
reload		      :  reload configuration

core stop gracefully           -- Gracefully shut down Asterisk
core stop now                  -- Shut down Asterisk immediately
core stop when convenient      -- Shut down Asterisk at empty call volume

logger add channel debug_log_pan notice,warning,debug,verbose
logger show channels



TLS (sip.conf)
------------------------------------------
[general] 
tlsenable=yes
tlscertfile=/etc/asterisk/certs/10.10.10.148_cert.pem
tlscafile=/etc/asterisk/certs/root.pem
tlsprivatekey=/etc/asterisk/certs/10.10.10.148_key.pem
tlscipher=ALL
tlsclientmethod=tlsv1
tlsbindaddr=10.10.10.148:5061









